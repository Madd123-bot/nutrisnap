<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NutriSnap - Aplikasi Web Nutrisi</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body><!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>NutriSnap - Cloud Version</title>
  
  <!-- FIREBASE SDKs -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut, signInWithEmailAndPassword, createUserWithEmailAndPassword, updateProfile } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    import { getFirestore, collection, addDoc, query, where, orderBy, onSnapshot, limit } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // --- YOUR KEYS ARE PRE-FILLED HERE ---
    const firebaseConfig = {
      apiKey: "AIzaSyC9hya7EGpzu9Qn-bcjcwVpgy-_K7NR47A",
      authDomain: "nutrisnap-34c6b.firebaseapp.com",
      projectId: "nutrisnap-34c6b",
      storageBucket: "nutrisnap-34c6b.firebasestorage.app",
      messagingSenderId: "427310632230",
      appId: "1:427310632230:web:78e2943728aec2987ac5e7"
    };

    let app, auth, db;
    let isFirebaseReady = false;

    try {
        app = initializeApp(firebaseConfig);
        auth = getAuth(app);
        db = getFirestore(app);
        isFirebaseReady = true;
        console.log("Firebase Connected");
    } catch (e) {
        console.error("Firebase Init Error:", e);
    }

    // --- LOGIN FUNCTIONS ---
    window.handleGoogleLogin = async () => {
        if (!isFirebaseReady) return alert("Firebase not ready");
        
        try {
            await signInWithPopup(auth, new GoogleAuthProvider());
        } catch (error) {
            console.error(error);
            // This error happens if you forgot to add github.io to Firebase
            if (error.code === 'auth/unauthorized-domain') {
                alert("HALANGAN KESELAMATAN: Domain ini belum dibenarkan.\n\nSila pergi ke Firebase Console -> Authentication -> Settings -> Authorized Domains\n\nTambah: 'github.io' atau domain github anda.");
            } else {
                alert("Login Failed: " + error.message);
            }
        }
    };

    window.handleEmailLogin = async () => {
        const email = document.getElementById('loginEmail').value;
        const pass = document.getElementById('loginPass').value;
        if (!email || !pass) return alert("Sila isi e-mel dan kata laluan.");
        
        try {
            await signInWithEmailAndPassword(auth, email, pass);
        } catch (error) {
            alert("Gagal: " + error.message);
        }
    };

    window.handleEmailSignup = async () => {
        const name = document.getElementById('signupName').value;
        const email = document.getElementById('signupEmail').value;
        const pass = document.getElementById('signupPass').value;
        if (!name || !email || !pass) return alert("Isi semua info.");

        try {
            const res = await createUserWithEmailAndPassword(auth, email, pass);
            await updateProfile(res.user, { displayName: name });
        } catch (error) {
            alert("Gagal Daftar: " + error.message);
        }
    };

    window.handleLogout = async () => {
        if (isFirebaseReady) await signOut(auth);
        window.location.reload();
    };

    // Exports
    window.auth = auth;
    window.db = db;
    window.isFirebaseReady = isFirebaseReady;
    window.getCollection = (uid, col) => isFirebaseReady ? collection(db, 'users', uid, col) : null;
    window.fs = { query, orderBy, limit, onSnapshot, addDoc };
  </script>

  <style>
    /* ... (CSS Styles from previous versions) ... */
    :root { --bg:#f0f7ff; --card:#ffffff; --primary:#377CFF; --primary-gradient:linear-gradient(135deg,#377CFF 0%,#00C6FF 100%); --soft:#eef6ff; --muted:#8898aa; --accent:#2dce89; --accent-gradient:linear-gradient(135deg,#2dce89 0%,#2dcecc 100%); --radius:16px; font-family:Inter,sans-serif; }
    * { box-sizing:border-box }
    html,body { height:100%; margin:0; background:var(--bg); background-image:url("data:image/svg+xml,%3Csvg width='140' height='140' viewBox='0 0 140 140' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='10' y='30' font-size='24' opacity='0.2'%3Eüçé%3C/text%3E%3Ctext x='60' y='40' font-size='24' opacity='0.2'%3Eü•ï%3C/text%3E%3Ctext x='30' y='90' font-size='24' opacity='0.2'%3Eü•¶%3C/text%3E%3Ctext x='90' y='80' font-size='24' opacity='0.2'%3Eüçå%3C/text%3E%3Ctext x='110' y='30' font-size='24' opacity='0.2'%3EüçÖ%3C/text%3E%3Ctext x='10' y='120' font-size='24' opacity='0.2'%3EüåΩ%3C/text%3E%3C/svg%3E"); color:#32325d; -webkit-font-smoothing:antialiased; }
    .hidden { display:none!important; }
    #app { display:flex; flex-direction:column; height:100vh; overflow:hidden; }
    .topbar { height:64px; flex-shrink:0; display:flex; align-items:center; justify-content:space-between; padding:0 18px; background:var(--primary-gradient); box-shadow:0 4px 6px rgba(50,50,93,0.11); z-index:100; color:white; }
    .brand { font-weight:800; font-size:22px; letter-spacing:-0.5px; }
    .user-icon { width:38px; height:38px; background:rgba(255,255,255,0.2); border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:600; cursor:pointer; }
    .user-icon img { width:100%; height:100%; object-fit:cover; border-radius:50%; }
    .screens { flex:1; overflow-y:auto; padding:20px; padding-bottom:90px; position:relative; }
    .screen { display:none; animation:fadeIn 0.4s cubic-bezier(0.165,0.84,0.44,1); }
    .screen.active { display:block; }
    @keyframes fadeIn { from{opacity:0;transform:translateY(10px)} to{opacity:1;transform:translateY(0)} }
    .login-card { background:rgba(255,255,255,0.98); padding:30px 20px; border-radius:var(--radius); box-shadow:0 10px 25px rgba(50,50,93,0.15); text-align:center; max-width:400px; margin:40px auto; }
    input,select { width:100%; padding:14px; margin-bottom:15px; border:1px solid #e0e6ed; border-radius:10px; font-size:16px; outline:none; }
    button { width:100%; padding:14px; border:none; border-radius:10px; font-size:16px; font-weight:600; cursor:pointer; margin-bottom:12px; transition:transform 0.1s; }
    button:active { transform:scale(0.97); }
    .primary { background:var(--primary-gradient); color:white; }
    .secondary { background:var(--soft); color:var(--primary); }
    .accent-btn { background: var(--accent-gradient); color: white; }
    .danger-btn { background: #fff0f3; color: var(--danger); }
    .stats-grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:25px; }
    .stat-card { background:var(--card); padding:15px; border-radius:var(--radius); box-shadow:0 4px 12px rgba(50,50,93,0.1); text-align:center; position:relative; overflow:hidden; }
    .stat-card.full-width { grid-column:span 2; }
    .stat-card::after { content:""; position:absolute; top:0; left:0; right:0; height:4px; background:var(--primary-gradient); }
    .stat-val { font-size:24px; font-weight:800; color:#32325d; }
    .stat-label { font-size:11px; color:var(--muted); margin-top:4px; font-weight:600; text-transform:uppercase; }
    .fab-btn { position:fixed; bottom:30px; left:50%; transform:translateX(-50%); width:60px; height:60px; border-radius:50%; background:var(--accent-gradient); color:white; border:none; box-shadow:0 10px 20px rgba(45,206,137,0.4); display:flex; align-items:center; justify-content:center; z-index:1000; }
    .bottombar { position:fixed; bottom:0; left:0; right:0; height:70px; background:rgba(255,255,255,0.98); display:flex; justify-content:space-between; align-items:center; padding:0 10px; box-shadow:0 -5px 20px rgba(0,0,0,0.04); z-index:900; }
    .nav-btn { flex:1; background:none; border:none; color:#adb5bd; font-size:11px; font-weight:600; display:flex; flex-direction:column; align-items:center; gap:5px; }
    .nav-btn.active { color:var(--primary); }
    .nav-spacer { width:70px; }
    .upload-box { background:#f6f9fc; height:200px; border-radius:10px; display:flex; align-items:center; justify-content:center; margin-bottom:20px; color:#cbd5e0; border:2px dashed #e2e8f0; position:relative; overflow:hidden; }
    .preview-img { width:100%; height:100%; object-fit:cover; position:absolute; }
    .loading-overlay { position:absolute; top:0; left:0; right:0; bottom:0; background:rgba(255,255,255,0.9); display:flex; flex-direction:column; align-items:center; justify-content:center; z-index:10; color:var(--primary); font-weight:700; font-size:14px; }
    .spinner { width:30px; height:30px; border:3px solid var(--soft); border-top:3px solid var(--primary); border-radius:50%; animation:spin 1s linear infinite; margin-bottom:10px; }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    .divider { margin: 25px 0; color: var(--muted); font-size: 12px; font-weight: 700; letter-spacing: 1px; }
    .login-hint { margin-top: 15px; font-size: 14px; color: var(--muted); }
    .login-hint a { color: var(--primary); text-decoration: none; font-weight: 700; }
    .list-item { background: var(--card); padding: 16px; border-radius: 12px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border: 1px solid #f0f2f5; }
    .item-date { font-size: 12px; color: var(--muted); }
    .item-val { font-weight: 700; font-size: 16px; color: #32325d; }
  </style>
</head>
<body>
  <div id="app">
    <header class="topbar"><div class="brand">NutriSnap</div><div id="userIcon" class="user-icon hidden">A</div></header>
    <main class="screens">
      <!-- Login -->
      <section id="login" class="screen active">
        <div class="login-card">
          <h1>Selamat Datang</h1>
          <p>Sila log masuk (Firebase)</p>
          <button class="primary" onclick="window.handleGoogleLogin()">Masuk dengan Google</button>
          <div class="divider">ATAU</div>
          <button class="secondary" data-nav="emailLogin">Masuk dengan E-mel</button>
          <p class="login-hint">Belum ada akaun? <a href="#" data-nav="emailSignup">Daftar</a></p>
        </div>
      </section>

      <!-- Email Login -->
      <section id="emailLogin" class="screen">
        <div class="login-card">
          <h2>Log Masuk</h2>
          <input type="email" placeholder="E-mel" id="loginEmail" />
          <input type="password" placeholder="Kata Laluan" id="loginPass" />
          <button class="primary" onclick="window.handleEmailLogin()">Masuk</button>
          <button class="secondary" data-nav="login">Kembali</button>
        </div>
      </section>

      <!-- Signup -->
      <section id="emailSignup" class="screen">
        <div class="login-card">
          <h2>Daftar</h2>
          <input type="text" placeholder="Nama Penuh" id="signupName" />
          <input type="email" placeholder="E-mel" id="signupEmail" />
          <input type="password" placeholder="Kata Laluan" id="signupPass" />
          <button class="primary" onclick="window.handleEmailSignup()">Daftar</button>
          <button class="secondary" data-nav="login">Kembali</button>
        </div>
      </section>
      
      <!-- Home -->
      <section id="home" class="screen">
        <div class="stats-grid">
            <div class="stat-card full-width"><div class="stat-val" id="calBalance">0</div><div class="stat-label">Kalori</div></div>
            <div class="stat-card"><div class="stat-val" id="protBalance">0</div><div class="stat-label">Protein</div></div>
            <div class="stat-card"><div class="stat-val" id="carbBalance">0</div><div class="stat-label">Karbo</div></div>
        </div>
        <h3>Log Makanan Terkini</h3>
        <div id="recentMealsList" class="history-list"></div>
      </section>

      <!-- Upload -->
      <section id="upload" class="screen">
        <div class="login-card">
          <h2>Analisis Makanan</h2>
          <div class="upload-box">
             <img id="uploadPreview" class="preview-img hidden" src="" alt="Preview">
             <div id="aiLoading" class="loading-overlay hidden"><div class="spinner"></div><span>Menganalisis AI...</span></div>
             <div id="uploadPlaceholder">
                <svg width="80" height="80" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm-6 4a6 6 0 1 1 12 0 6 6 0 0 1-12 0zM9 2l-1.83 2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-2.17L15 2H9z"/></svg>
             </div>
          </div>
          <input type="file" id="cameraInput" accept="image/*" style="display:none" onchange="handleImageUpload(this)">
          <button class="primary" onclick="document.getElementById('cameraInput').click()">Ambil Gambar</button>
          <button class="secondary" onclick="showScreen('home')">Batal</button>
        </div>
      </section>

      <!-- Profile -->
      <section id="profile" class="screen">
        <div class="login-card">
            <div class="user-icon" style="width:80px; height:80px; font-size:32px; margin:0 auto 20px; background:var(--primary-gradient); box-shadow:0 10px 20px rgba(55, 124, 255, 0.3);">A</div>
            <h3 id="profileName">Pengguna</h3>
            <p style="color:var(--muted);" id="profileEmail">user@example.com</p>
            <button class="secondary" style="margin-top:20px;">Edit Profil</button>
            <div class="divider">ZON BAHAYA</div>
            <button class="secondary" style="color:var(--danger); border:1px solid var(--danger); background:transparent;" onclick="window.handleLogout()">Log Keluar</button>
        </div>
      </section>
    </main>
    
    <button id="fabBtn" class="fab-btn hidden" data-nav="upload">
      <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8zm-6 4a6 6 0 1 1 12 0 6 6 0 0 1-12 0zM9 2l-1.83 2H5a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-2.17L15 2H9z"/></svg>
    </button>

    <nav class="bottombar hidden" id="mainNav">
      <button class="nav-btn active" data-nav="home"><svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3L2 12h3v8z"/></svg><span>Utama</span></button>
      <div class="nav-spacer"></div>
      <button class="nav-btn" data-nav="profile"><svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4s-4 1.79-4 4s1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg><span>Profil</span></button>
    </nav>
  </div>

  <script>
    // --- API KEY UNTUK AI (Optional) ---
    const API_KEY = ""; 

    let currentUser = null;
    let mealLogs = [];

    // Auth Listener
    if (window.isFirebaseReady) {
        import("https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js").then(({ onAuthStateChanged }) => {
            onAuthStateChanged(window.auth, (user) => {
                if (user) {
                    currentUser = user;
                    subscribeToData(user.uid);
                    showScreen('home');
                    if(user.photoURL) document.getElementById('userIcon').innerHTML = `<img src="${user.photoURL}">`;
                    document.getElementById('profileName').innerText = user.displayName || "Pengguna";
                    document.getElementById('profileEmail').innerText = user.email;
                } else showScreen('login');
            });
        });
    }

    // Firestore Logic
    function subscribeToData(uid) {
        const mealsRef = window.getCollection(uid, 'meals');
        if(mealsRef) {
            window.fs.onSnapshot(mealsRef, (snap) => {
                mealLogs = []; snap.forEach(d => mealLogs.push(d.data()));
                renderHome();
            });
        }
    }

    // UI Logic
    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.toggle('active', s.id===id));
        if (id !== 'login' && id !== 'emailLogin' && id !== 'emailSignup') {
            document.getElementById('mainNav').classList.remove('hidden');
            document.getElementById('fabBtn').classList.remove('hidden');
            document.getElementById('userIcon').classList.remove('hidden');
        } else {
            document.getElementById('mainNav').classList.add('hidden');
            document.getElementById('fabBtn').classList.add('hidden');
            document.getElementById('userIcon').classList.add('hidden');
        }
    }
    
    function renderHome() {
        const sum = (k) => mealLogs.reduce((a, b) => a + (b[k]||0), 0);
        document.getElementById('calBalance').innerText = sum('calories');
        document.getElementById('protBalance').innerText = sum('protein');
        document.getElementById('carbBalance').innerText = sum('carbs');
    }

    function handleImageUpload(input) { 
        alert("Sila masukkan API Key Gemini dalam kod untuk menggunakan AI. Simulasi: Tiada Data."); 
        showScreen('home'); 
    }

    document.querySelectorAll('[data-nav]').forEach(el => {
        el.addEventListener('click', () => showScreen(el.dataset.nav));
    });
  </script>
</body>
</html>
  <div id="app">
    <header class="topbar">
      <div class="brand">NutriSnap</div>
      <div id="userIcon" class="user-icon hidden" title="Profil">A</div>
    </header>

    <main class="screens">
      
      <section id="login" class="screen active">
        <div class="login-card">
          <h1>Selamat Datang ke NutriSnap</h1>
          <p>Sila daftar atau log masuk untuk meneruskan.</p>
          
          <button class="primary" id="googleBtn">Teruskan dengan Google</button>
          <button class="primary fb-btn" id="facebookBtn">Teruskan dengan Facebook</button>

          <div class="divider">ATAU</div>

          <button class="secondary" data-nav="emailLogin">Log Masuk dengan E-mel</button>
          
          <div class="login-hint">
            <p>Belum ada akaun? <a href="#" data-nav="emailSignup">Daftar Sekarang</a></p>
          </div>
        </div>
      </section>
      
      <section id="emailLogin" class="screen">
        <div class="login-card">
          <h1>Log Masuk E-mel</h1>
          <p>Guna kata laluan **12345** untuk simulasi.</p>
          <label>E-mel</label>
          <input id="emailLoginInput" type="email" value="ahmad@email.com" />
          <label>Kata Laluan</label>
          <input id="passwordInput" type="password" />
          <div style="height:20px"></div>
          <button id="loginBtn" class="primary">Log Masuk</button>
          <div class="login-hint"><a href="#" data-nav="login">Kembali</a></div>
        </div>
      </section>
      
       <section id="emailSignup" class="screen">
        <div class="login-card">
          <h1>Daftar Akaun</h1>
          <p>Hanya simulasi, tiada akaun sebenar yang akan dicipta.</p>
          <label>Nama Penuh</label>
          <input id="signupName" type="text" />
          <label>E-mel</label>
          <input id="signupEmail" type="email" />
          <label>Cipta Kata Laluan</label>
          <input id="signupPassword" type="password" />
          <div style="height:20px"></div>
          <button id="signupMockBtn" class="primary">Daftar</button>
          <div class="login-hint"><a href="#" data-nav="emailLogin">Sudah ada akaun?</a></div>
        </div>
      </section>


      <section id="home" class="screen">
        <div class="home-card">
          <h1>Track Nutrisi Mudah</h1>
          <p>Analisis gambar makanan untuk pengiraan kalori dan nutrisi.</p>
          <div style="height:12px"></div>
          <div class="home-stats">
            <div class="stat-card" data-nav="meals">
              <div class="stat-icon">üçΩÔ∏è</div>
              <div class="stat-text">Sejarah Penuh</div>
            </div>
            <div class="stat-card" data-nav="weight">
              <div class="stat-icon">‚öñÔ∏è</div>
              <div class="stat-text">Pantau Berat</div>
            </div>
          </div>
        </div>
        
        <div style="height:20px"></div>
        <h3>Log Makanan Terkini</h3>
        <div id="logListHome" class="log-list-home">
          <div class="log-item">Tiada rekod makanan.</div>
        </div>
      </section>

      <section id="upload" class="screen">
        <h2>Upload Gambar Makanan</h2>
        <div class="upload-card">
          <div class="upload-drop" id="dropZone">
            <input id="fileInput" type="file" accept="image/*" />
            <div class="camera-icon">üì∑</div>
            <div class="upload-text">Tambah Gambar (maks 5MB)</div>
          </div>
          <button class="primary" id="analyzeBtn">Analisis dengan AI</button>
          <div id="uploadHint" class="hint">Format: JPG/PNG. Saiz maksimum 5MB.</div>
        </div>
      </section>

      <section id="analysis" class="screen">
        <h2>Hasil Analisis Gambar</h2>
        <div class="result-card" id="resultCard">
            
          <div id="loadingIndicator" class="hidden" style="padding: 20px;">
              <div class="camera-icon">‚è≥</div>
              <div class="upload-text" style="color:var(--primary); font-weight:700;">AI Sedang Menganalisis Makanan...</div>
              <div class="upload-text" style="margin-top: 5px;">Sila tunggu sebentar.</div>
          </div>

          <div class="food-image" id="resultImg">Muat naik Gambar...</div>
          
          <div style="padding: 0 18px 10px;">
              <label>Waktu Hidangan</label>
              <select id="mealTypeSelect">
                  <option value="Sarapan">Sarapan</option>
                  <option value="Makan Tengah Hari">Makan Tengah Hari</option>
                  <option value="Makan Malam">Makan Malam</option>
                  <option value="Snek">Snek</option>
              </select>
          </div>

          <div class="result-list">
            <div class="result-row"><span>Kalori</span><span id="rCalories">-</span></div>
            <div class="result-row"><span>Karbohidrat</span><span id="rCarb">-</span></div>
            <div class="result-row"><span>Protein</span><span id="rProtein">-</span></div>
            <div class="result-row"><span>Lemak</span><span id="rFat">-</span></div>
          </div>
        </div>

        <div id="suggestionPopup" class="popup hidden">
          <div class="popup-content">
            <div class="popup-title">Amaran: Makanan Tidak Sihat</div>
            <div class="popup-text" id="popupSuggestion"></div>
            <div class="popup-actions">
              <button id="ignoreBtn" class="primary">Tutup</button>
            </div>
          </div>
        </div>
      </section>
      
      <section id="meals" class="screen">
        <h2>Sejarah Makanan</h2>
        <div class="meals-card">
          <div class="tabs">
            <button class="tab-btn active" data-tab="calories">Kalori</button>
            <button class="tab-btn" data-tab="carbs">Karbohidrat</button>
            <button class="tab-btn" data-tab="protein">Protein</button>
          </div>

          <div id="mealsContainer"></div>
        </div>
      </section>

      <section id="user" class="screen">
        <h2>Profil Pengguna</h2>
        <div class="profile-card">
          <div class="avatar">A</div>
          <div class="profile-info">
            <div class="pname" id="profileName">Ahmad</div>
            <div class="pmeta" id="profileEmail">ahmad@email.com</div>
          </div>
        </div>

        <div class="weight-summary">
          <div class="wbox">
            <div class="wlabel">Berat Mula</div>
            <div class="wvalue" id="startWeight">- kg</div>
          </div>
          <div class="wbox">
            <div class="wlabel">Berat Semasa</div>
            <div class="wvalue" id="currentWeight">- kg</div>
          </div>
          <div class="wbox">
            <div class="wlabel">Berat Matlamat</div>
            <div class="wvalue" id="goalWeight">- kg</div>
          </div>
        </div>
        <button class="primary" data-nav="weight">Urus Berat</button>
        <button class="secondary logout-btn" id="logoutBtn">Log Keluar</button>
      </section>

      <section id="weight" class="screen">
        <h2>Urus Berat</h2>
        <div class="weight-card">
          <label>Tarikh Rekod</label>
          <input id="inpDate" type="date" /> 
          <label>Berat Mula (kg)</label>
          <input id="inpStart" type="number" min="0" step="0.1" placeholder="Cth: 75.0" />
          <label>Berat Semasa (kg)</label>
          <input id="inpCurrent" type="number" min="0" step="0.1" placeholder="Cth: 73.5" />
          <label>Berat Matlamat (kg)</label>
          <input id="inpGoal" type="number" min="0" step="0.1" placeholder="Cth: 65.0" />
          <div style="height:10px"></div>
          <button id="saveWeight" class="primary">Simpan</button>
        </div>

        <div style="height:12px"></div>
        <div class="weight-summary">
          <div class="wbox">
            <div class="wlabel">Telah Turun</div>
            <div class="wvalue" id="lostSoFar">- kg</div>
          </div>
          <div class="wbox">
            <div class="wlabel">Baki Matlamat</div>
            <div class="wvalue" id="toGo">-</div>
          </div>
          <div class="wbox">
            <div class="wlabel">Semasa</div>
            <div class="wvalue" id="currentShort">- kg</div>
          </div>
        </div>

        <h3>Sejarah Berat</h3>
        <div id="weightHistory" class="history-list"></div>
      </section>

    </main>
    
    <button id="fabBtn" class="fab-btn hidden" data-nav="upload">
      <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24"><path fill="currentColor" d="M12 9a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5a5 5 0 0 1 5-5a5 5 0 0 1 5 5a5 5 0 0 1-5 5m7-12h-3.5L14 3h-4L8.5 5H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2"/></svg>
    </button>

    <nav class="bottombar hidden" id="mainNav">
      <button class="nav-btn active" data-nav="home">üè†</button>
      <button class="nav-btn" data-nav="weight">‚öñÔ∏è</button>
      <div class="nav-spacer"></div> 
      <button class="nav-btn" data-nav="meals">üçΩÔ∏è</button>
      <button class="nav-btn" data-nav="user">üë§</button>
    </nav>

    <div id="toast" class="toast hidden"></div>
  </div>

  <script src="script.js"></script>
</body>
</html>